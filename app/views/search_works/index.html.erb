
  <% @categories.each do |category| %>
    <%= category.name %>
    <%= check_box_tag 'category_ids[]', category.id, class: 'form-control' %>
    <div id="result"></div>
    <% end %>
  <center>
      <h2>List works</h2>
  </center>
  <hr/>
  <table class="table table-hover table-border">
      <thead>
          <tr>
              <th>#</th>
              <th>Customer</th>
              <th>Work name</th>
              <th>Skill</th>
              <th>Price</th>
              <th>Action</th>
          </tr>
      </thead>
      <tbody>
          <% if !@works.nil?%>
            <%  @works.each_with_index do |work, index| %> 
              <tr>
                  <td><%= index+1 %> </td>
                  <td><%= work.user.fullname%> </td>
                  <td><%= work.name %></td>
                  <td>
                      <% work.categories.each do |category| %>
                        <% if @categories.include? category  %>
                          <%=  link_to category.name, 'javascript:;',class: "btn btn-primary" %>
                          <% else %>
                            <%=  link_to category.name, 'javascript:;', class: "btn btn-danger" %>
                            <%  end %>
                          <% end %>
                      </td>
                      <td><%= work.price %> $</td>
                      <td>
                          <%= link_to 'View detail', work_path(work), class: "btn btn-default"  %>
                      </td>
                    </tr>
                  <% end
                  else
                %>
                <%  end%>
            </tbody>
        </table>


<script>
/*$('#category_ids_').click(function() {
  var url = "/search_works/search_category";
  var data = $('#category_ids_').val();
  $.get(url, {'id': data}, function(response){

  });
});*/
/*$( "#category_ids_" ).click(function() {
  alert( "Handler for .click() called." );
});*/
 /* var $checkboxes = $("input[type=checkbox][name=category_ids_]");
  $checkboxes.on("click",
    function () {
      alert( "Handler for .click() called." );
    }
  });*/

  $('input:checkbox[name="category_ids[]"]').change(
    function () {
      var check = [];
      var url = "/search_works/search_category";
      $('input:checkbox[name="category_ids[]"]').each(function () {
        if ($(this).is(':checked')) {
            check.push(parseInt($(this).val()));
        }
        else {
        }
      });
      $.get(url, {'id_aj[]': check}, function(response) {

      });
    });
    
</script>